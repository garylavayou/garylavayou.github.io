<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MySQL - Learning Programming Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The example book covers examples.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/pagetoc.css">
        <!-- MathJax -->
        <!-- <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
        <script async type="text/javascript" src="theme/MathJax.js"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../prefix.html">Prefix</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">程序设计语言</li><li class="chapter-item expanded "><a href="../Python/Python编程基础.html">Python</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Python/Python编程基础.html">编程基础</a></li><li class="chapter-item expanded "><a href="../Python/Python开发环境.html">开发环境</a></li><li class="chapter-item expanded "><a href="../Python/Python数据类型.html">数据类型</a></li><li class="chapter-item expanded "><a href="../Python/Python输入输出.html">输入输出</a></li><li class="chapter-item expanded "><a href="../Python/Python编程应用.html">编程应用</a></li><li class="chapter-item expanded "><a href="../Python/Python数值计算.html">数值计算</a></li><li class="chapter-item expanded "><a href="../Python/Python系统编程.html">系统编程</a></li><li class="chapter-item expanded "><a href="../Python/Python高级编程.html">高级编程</a></li></ol></li><li class="chapter-item expanded "><a href="../Java/JAVA编程基础.html">Java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Java/JAVA编程基础.html">编程基础</a></li><li class="chapter-item expanded "><a href="../Java/Java开发环境.html">开发环境</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Java/Maven POM.html">Maven 配置</a></li></ol></li><li class="chapter-item expanded "><a href="../Java/JAVA数据类型.html">数据类型</a></li><li class="chapter-item expanded "><a href="../Java/JAVA输入输出.html">输入输出</a></li><li class="chapter-item expanded "><a href="../Java/JAVA系统编程.html">系统编程</a></li><li class="chapter-item expanded "><a href="../Java/Scala.html">Scala</a></li><li class="chapter-item expanded "><a href="../Java/ScalaFrameworks.html">Scala 框架</a></li></ol></li><li class="chapter-item expanded "><a href="../CSharp.NET/CSharp编程基础.html">C#/.NET</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../CSharp.NET/CSharp编程基础.html">编程基础</a></li><li class="chapter-item expanded "><a href="../CSharp.NET/CSharp输入输出.html">输入输出</a></li><li class="chapter-item expanded "><a href="../CSharp.NET/CSharp数据容器.html">数据容器</a></li><li class="chapter-item expanded "><a href="../CSharp.NET/CSharp数值计算.html">数值计算</a></li><li class="chapter-item expanded "><a href="../CSharp.NET/dotnet开发.html">.NET 开发</a></li></ol></li><li class="chapter-item expanded "><a href="../CC++/Modern C++.html">C and C++</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../CC++/Modern C++.html">Modern C++</a></li><li class="chapter-item expanded "><a href="../CC++/C++开发环境.html">开发环境</a></li><li class="chapter-item expanded "><a href="../CC++/C++容器.html">数据容器</a></li><li class="chapter-item expanded "><a href="../CC++/输入输出.html">输入输出</a></li><li class="chapter-item expanded "><a href="../CC++/标准函数库.html">标准库</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../CC++/数学函数.html">数学函数</a></li></ol></li></ol></li><li class="chapter-item expanded "><div>Web开发</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../JavaScript/JavaScript.html">JavaScript</a></li><li class="chapter-item expanded "><a href="../JavaScript/TypeScript.html">TypeScript</a></li><li class="chapter-item expanded "><a href="../JavaScript/JS开发环境.html">开发环境</a></li></ol></li><li class="chapter-item expanded "><div>开发工具</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../开发环境/git.html">Git</a></li><li class="chapter-item expanded "><a href="../笔记/正则表达式.html">正则表达式</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">操作系统</li><li class="chapter-item expanded "><a href="../Linux/Linux配置和管理.html">Linux</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Linux/Linux配置和管理.html">配置管理</a></li><li class="chapter-item expanded "><a href="../Linux/Linux-Shell.html">Shell Script</a></li><li class="chapter-item expanded "><a href="../Linux/Linux发行版.html">Linux 发行版</a></li><li class="chapter-item expanded "><a href="../Linux/操作系统原理.html">操作系统原理</a></li></ol></li><li class="chapter-item expanded "><a href="../Windows/Windows配置管理.html">Windows</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Windows/Windows配置管理.html">配置管理</a></li><li class="chapter-item expanded "><a href="../Windows/Windows Shell.html">Shell</a></li><li class="chapter-item expanded "><a href="../Windows/Windows Applications.html">应用软件</a></li></ol></li><li class="chapter-item expanded "><div>应用软件</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../应用软件/程序开发软件.html">程序开发</a></li><li class="chapter-item expanded "><a href="../应用软件/服务器管理软件.html">服务器管理</a></li><li class="chapter-item expanded "><a href="../应用软件/网络访问软件.html">网络访问</a></li><li class="chapter-item expanded "><a href="../应用软件/网络服务软件.html">网络服务</a></li><li class="chapter-item expanded "><a href="../应用软件/文档生成软件.html">文档生成</a></li><li class="chapter-item expanded "><a href="../应用软件/文件处理软件.html">文件处理</a></li><li class="chapter-item expanded "><a href="../应用软件/协作办公软件.html">协作办公</a></li><li class="chapter-item expanded "><a href="../应用软件/知识管理软件.html">知识管理</a></li><li class="chapter-item expanded "><a href="../应用软件/多媒体编辑软件.html">多媒体编辑</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">机器学习</li><li class="chapter-item expanded "><a href="../机器学习/机器学习实践.html">机器学习实践</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../机器学习/ScikitLearn.html">scikit-learn</a></li><li class="chapter-item expanded "><a href="../机器学习/TensorFlow.html">TensorFlow</a></li><li class="chapter-item expanded "><a href="../机器学习/Pytorch.html">Pytorch</a></li><li class="chapter-item expanded "><a href="../机器学习/图神经网络.html">图神经网络</a></li></ol></li><li class="chapter-item expanded "><a href="../机器学习/机器学习原理与算法.html">原理与算法</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../机器学习/统计学习算法.html">统计学习算法</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">数据库</li><li class="chapter-item expanded "><a href="../数据库/SQL语法.html">SQL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../数据库/SQL DDL.html">SQL DDL</a></li><li class="chapter-item expanded "><a href="../数据库/SQL DML.html">SQL DML</a></li><li class="chapter-item expanded "><a href="../数据库/SQL数据类型.html">数据类型</a></li></ol></li><li class="chapter-item expanded "><a href="../数据库/MySQL.html" class="active">MySQL</a></li><li class="chapter-item expanded "><a href="../数据库/PostgreSQL.html">PostgreSQL</a></li><li class="chapter-item expanded "><a href="../数据库/HiveSQL.html">Hive SQL</a></li><li class="chapter-item expanded "><a href="../数据库/Elasticsearch.html">Elasticsearch</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../数据库/Elastic Datasource.html">数据源</a></li></ol></li><li class="chapter-item expanded "><a href="../数据库/Mongodb.html">Mongodb</a></li><li class="chapter-item expanded "><a href="../数据库/GraphDatabase.html">图数据库</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">服务和大数据平台</li><li class="chapter-item expanded "><a href="../服务器/分布式大数据处理.html">分布式大数据处理</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../服务器/CDH6大数据集群离线安装.html">CDH6 安装教程</a></li><li class="chapter-item expanded "><a href="../服务器/Spark Python API.html">Pyspark</a></li><li class="chapter-item expanded "><a href="../服务器/流数据处理.html">流数据处理</a></li></ol></li><li class="chapter-item expanded "><a href="../服务器/容器编排.html">容器编排</a></li><li class="chapter-item expanded "><a href="../服务器/虚拟化.html">虚拟化</a></li><li class="chapter-item expanded "><div>任务编排</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../服务器/Airflow.html">Airflow</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">其他</li><li class="chapter-item expanded "><div>数据标记语言</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../数据交换语言/JSON and YAML.html">JSON and YAML</a></li><li class="chapter-item expanded "><a href="../数据交换语言/XML.html">XML</a></li><li class="chapter-item expanded "><a href="../数据交换语言/HTML.html">HTML</a></li></ol></li><li class="chapter-item expanded "><div>网络协议</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Protocols/http.html">HTTP</a></li><li class="chapter-item expanded "><a href="../Protocols/DNS.html">DNS</a></li><li class="chapter-item expanded "><a href="../Protocols/端口分配.html">端口分配</a></li><li class="chapter-item expanded "><a href="../Protocols/IP protocol numbers.html">IP 承载协议</a></li><li class="chapter-item expanded "><a href="../Protocols/RPC.html">RPC</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Learning Programming Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <h1 id="mysql"><a class="header" href="#mysql">MySQL</a></h1>
<img src="MySQL.assets/mariadb-vs-mysql.png" alt="MariaDB vs MySQL" style="zoom: 33%;" align="center" />
<p><a href="https://kinsta.com/blog/mariadb-vs-mysql/">MariaDB vs MySQL, a Database Technologies Rundown (kinsta.com)</a></p>
<h2 id="安装运行"><a class="header" href="#安装运行">安装运行</a></h2>
<h3 id="本机安装运行"><a class="header" href="#本机安装运行">本机安装运行</a></h3>
<pre><code class="language-shell">sudo apt install mysql-server mysql-client  # 可选
</code></pre>
<blockquote>
<p>图形界面：<code>MySQL Workbench</code>。</p>
</blockquote>
<h4 id="使用yum源安装mysql"><a class="header" href="#使用yum源安装mysql">使用Yum源安装MySQL</a></h4>
<p><strong>自动添加源信息</strong>：<a href="https://dev.mysql.com/downloads/repo/yum/">下载RPM包</a>，使用安装包自动添加源信息。</p>
<pre><code class="language-shell">sudo yum localinstall mysql80-community-release-fc34-1.noarch.rpm
yum repolist enabled | grep &quot;mysql.*-community.*&quot;
</code></pre>
<p><a href="https://repo.mysql.com/">软件源</a>提供多个版本的源信息，但安装官方未提供支持的版本可能出现问题。</p>
<blockquote>
<p><em>MySQL 5.7 does not support Fedora; support was removed in MySQL 5.7.30.</em></p>
</blockquote>
<p><strong>手动添加源信息</strong>：<code>/etc/yum.rpo.d/mysql-community.repo</code></p>
<pre><code class="language-shell">sudo dnf remove @mysql
sudo dnf module reset mysql &amp;&amp; sudo dnf module disable mysql
</code></pre>
<pre><code class="language-shell">[mysql57-community]
name=MySQL 5.7 Community Server
baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/
enabled=1
gpgcheck=0
[mysql-connectors-community]
name=MySQL Connectors Community
baseurl=http://repo.mysql.com/yum/mysql-connectors-community/el/7/$basearch/
enabled=1
gpgcheck=0
[mysql-tools-community]
name=MySQL Tools Community
baseurl=http://repo.mysql.com/yum/mysql-tools-community/el/7/$basearch/
enabled=1
gpgcheck=0
</code></pre>
<p><strong>执行安装</strong>：</p>
<pre><code class="language-shell">sudo dnf config-manager --disable mysql80-community
sudo dnf config-manager --enable mysql57-community
sudo dnf install mysql-community-server
sudo systemctl enable --now mysqld
</code></pre>
<blockquote>
<p>如果系统中由<code>maria-db</code>相关库，可能导致依赖检查失败，需要首先手动卸载<code>maria-db</code>相关库。</p>
</blockquote>
<p>修改管理员登录密码：</p>
<pre><code class="language-shell"># [CentOS] 获取临时密码,Ubuntu下初始密码为空
# sudo grep 'A temporary password' /var/log/mysqld.log |tail -1
sudo mysql_secure_installation   
# 或使用 mysql -u root -p &lt;&lt;&lt; &lt;temp_passwd&gt;
# 然后修改密码：ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass4!';
</code></pre>
<blockquote>
<p><em>The default password policy implemented by <code>validate_password</code> requires that passwords contain at least <strong>one uppercase letter, one lowercase letter, one digit, and one special character</strong>, and that the total password length is at least 8 characters.</em></p>
</blockquote>
<blockquote>
<ol>
<li>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/linux-installation-yum-repo.html">MySQL :: MySQL 5.7 Reference Manual :: 2.5.1 Installing MySQL on Linux Using the MySQL Yum Repository</a></p>
</li>
<li>
<p><a href="https://www.systempandit.com/install-mysql-5-7-on-centos-8-rhel-8-linux/">Install MySQL 5.7 on CentOS 8 / RHEL 8 Linux - SystemPandit</a></p>
</li>
</ol>
</blockquote>
<h4 id="使用docker容器"><a class="header" href="#使用docker容器">使用Docker容器</a></h4>
<p>使用<code>docker-compose</code>运行<a href="https://1drv.ms/u/s!AneoYr65dYDMrq5sHfoqxkbBpgFVyA?e=kc6qha">配置文件</a>：</p>
<pre><code class="language-yaml">version: &quot;3.1&quot;
services:
  db:
    image: mysql:5.7
    container_name: mysql57
    environment:
      - &quot;MYSQL_ROOT_PASSWORD=gang2019&quot;   # 设置管理员密码
      - &quot;MYSQL_DATABASE=exchange&quot;        # 设置默认数据库
      - &quot;MYSQL_USER=gary&quot;                # 添加数据库用户（授权访问上述数据库）
      - &quot;MYSQL_PASSWORD=gang2019&quot;        # 设置用户密码（测试）
    command: --default-authentication-plugin=mysql_native_password
    volumes:
      - mysql:/var/lib/mysql                   # 数据库文件的存储位置
      - mysqlinit:/docker-entrypoint-initdb.d  # 初始化脚本目录(可选)
      - mysqlconf:/etc/mysql/conf.d            # 自定义配置目录(可选)
    ports:
      - 3306:3306   # host -&gt; docker
    restart: always

  adminer:           # 管理服务
    image: adminer
    restart: always
    ports:
      - 18080:8080

volumes: 
  mysql:
    driver: local
  ......
</code></pre>
<blockquote>
<p>目录<code>mysql</code>和<code>mysql-init</code>不要嵌套。</p>
<p>环境变量<code>MYSQL_ROOT_PASSWORD_FILE=/run/secrets/mysql-root</code>设置从本地文件读取密码，类似地还有<code>MYSQL_PASSWORD</code>等。</p>
</blockquote>
<p>或使用脚本运行：</p>
<pre><code class="language-shell">#!/bin/bash
docker run -d \
	--name mysql57 \
	-v /home/gary/mysql:/var/lib/mysql \
	-v /home/gary/mysql-init:/docker-entrypoint-initdb.d \
	-v /my/custom:/etc/mysql/conf.d \  
	-e MYSQL_ROOT_PASSWORD=gang2019 \
	-e MYSQL_USER=gary \
	-e MYSQL_PASSWORD=gang2019 \
	-e MYSQL_DATABASE=exchange  \
	mysql:5.7 \
	--default-authentication-plugin=mysql_native_password
</code></pre>
<h3 id="运行环境和配置"><a class="header" href="#运行环境和配置">运行环境和配置</a></h3>
<h4 id="配置"><a class="header" href="#配置">配置</a></h4>
<p>配置文件路径：</p>
<p>Ubuntu：<code>/etc/mysql/mysql.cond.d/mysqld.conf  </code>；</p>
<p>CentOS：<code>/etc/my.cnf</code>；</p>
<h5 id="数据存储路径"><a class="header" href="#数据存储路径">数据存储路径</a></h5>
<pre><code class="language-shell">datadir=/var/lib/mysql
</code></pre>
<blockquote>
<p>如果系统启用了<a href="../Linux/Linux%E9%85%8D%E7%BD%AE%E5%92%8C%E7%AE%A1%E7%90%86.html#Security-Enhanced-Linux">SELinux</a>或appamor，则直接修改路径配置将导致服务无法启动。在保证相应目录的文件权限设置正确的情况下，需要检查SELinux的策略配置。</p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/selinux-file-context.html">MySQL :: MySQL 8.0 Reference Manual :: 6.7.4 SELinux File Context</a></p>
</blockquote>
<h4 id="版本信息"><a class="header" href="#版本信息">版本信息</a></h4>
<pre><code class="language-shell">mysql --version  # mysql客户端版本信息
mysql            # 登录后客户端显示服务器版本信息
</code></pre>
<pre><code class="language-mysql">SHOW VARIABLES LIKE 'version';
SELECT VERSION() as version;
STATUS;                         # 包括服务器版本信息
</code></pre>
<h4 id="目录信息"><a class="header" href="#目录信息">目录信息</a></h4>
<pre><code class="language-shell">/etc/mysql/mysql.conf.d/mysqld.cnf # mysql-server配置文件
</code></pre>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-move-a-mysql-data-directory-to-a-new-location-on-ubuntu-18-04">How To Move a MySQL Data Directory to a New Location on Ubuntu 18.04 | DigitalOcean</a></p>
<h4 id="插件管理"><a class="header" href="#插件管理">插件管理</a></h4>
<pre><code class="language-mysql">SHOW PLUGINS;
</code></pre>
<h3 id="查看mysql服务状态"><a class="header" href="#查看mysql服务状态">查看MySQL服务状态</a></h3>
<pre><code class="language-shell">sudo netstat -nlp
</code></pre>
<p>使用系统服务管理程序（<code>systemctl</code>、<code>service</code>等）管理MySQL服务。</p>
<h3 id="访问mysql"><a class="header" href="#访问mysql">访问MySQL</a></h3>
<h4 id="命令行工具"><a class="header" href="#命令行工具">命令行工具</a></h4>
<h5 id="登录"><a class="header" href="#登录">登录</a></h5>
<pre><code class="language-sh">mysql -u &lt;username&gt; -p [&lt;database&gt;];
mysql -u root -p  # 使用root用户登录数据库的root账号
</code></pre>
<p><code>username</code>表示要登录的用户的用户名，<code>-p</code>表示如果用户设置了密码，则在登录时要输入密码。</p>
<p>以下问题可能发生：</p>
<ol>
<li>
<p>Shell登录用户密码验证失败：未创建本地访问账户（<code>user@localhost</code>）或本地账户与远程账户密码不一致。</p>
</li>
<li>
<p>不允许主机访问：未对相应的主机/域名上的用户进行授权，需要在本机<a href="#%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7">创建对应的用户账号</a>。</p>
</li>
<li>
<p><code>root</code>无法通过密码登录：<a href="https://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html">为管理员账号设置密码（Generic Instructions）</a>。</p>
<p>Ubuntu系统下，MySQL 默认以安装软件的用户（通常为<code>root</code>）为数据的内置账户，通过系统中的用户身份进行登录验证（<code> auth_socket</code>），无需MySQL用户密码。因此，首先尝试使用<code>sudo mysql [-u root]</code>命令进行登录（<code>sudo</code>命令表示以<code>root</code>用户登录数据库，其后的用户参数不一定要使用<code>root</code>，仅使用该用户的信息进行验证）；</p>
<p>如果失败或者是需要从远程登录，则需要修改MySQL对用户的认证方式。在安全模式下启动MySQL：</p>
<pre><code class="language-shell">systemctl stop mysql  # =&gt; service mysql stop
sudo mkdir -p /var/run/mysqld &amp;&amp; chown mysql:mysql /var/run/mysqld  
sudo mysqld_safe --skip-grant-tables &amp;
mysql -u root    # login without password
service mysql restart
</code></pre>
<blockquote>
<p>==如果未取消==<code>skip-grant-tables</code>，则无法<a href="#%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE">使用网络连接访问</a>（为了安全起见，服务器未开启网络监听端口）。</p>
</blockquote>
<p>修改数据库中<code>root</code>用户的==认证方式==和<a href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81">修改密码</a>：</p>
<pre><code class="language-mysql">USE mysql;
UPDATE user SET plugin=&quot;mysql_native_password&quot; WHERE User='root'; 
ALTER USER root@localhost IDENTIFIED BY 'NewPassword'; 
flush privileges;
</code></pre>
<p>终止服务进程并重启服务再尝试登录。</p>
</li>
<li>
<p><em>warning: cannot change directory to /nonexistent: No such file or directory</em>：https://stackoverflow.com/a/63040661/6571140。该问题导致用户登录无法认证。</p>
<pre><code class="language-shell">sudo usermod -d /var/lib/mysql/ mysql
sudo systemctl start mysql.service  # service mysql start
</code></pre>
</li>
<li>
<p>使用<code>init</code>的系统（例如WSL2）无法正常停止MySQL：为<code>debian-sys-maint</code>配置数据库账户。</p>
<pre><code class="language-mysql">CREATE USER 'debian-sys-maint'@localhost identified by 'password'
GRANT ALL PRIVILEGES ON *.* TO 'debian-sys-maint'@localhost
</code></pre>
</li>
<li>
<p><em><code>Host xxx is blocked</code></em>：使用<code>mysqladmin -h MYSQL_HOST flush_hosts</code>刷新客户端主机地址缓存。</p>
</li>
</ol>
<h4 id="远程访问"><a class="header" href="#远程访问">远程访问</a></h4>
<p>MySQL 8.0默认开放UNIX套接字<code>/var/run/mysqld/mysqld.sock</code>和本地TCP/IP套接字访问<code>localhost/127.0.0.1</code>；因此无法从远程机器连接到数据库（<em>Connection refused error</em>）。</p>
<blockquote>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/can-not-connect-to-server.html">A Unix socket file is used if you do not specify a host name or if you specify the special host name localhost.</a></p>
</blockquote>
<p>修改MySQL Server配置文件，令<code>bind-address=0.0.0.0</code>，以允许本地回环地址以外的主机访问数据库。</p>
<blockquote>
<p><code>注意</code>：如果错误地将<code>bind-address</code>绑定到非本机IP将导致无法创建TCP套接字。</p>
</blockquote>
<p>测试网络访问：</p>
<pre><code class="language-shell">sudo mysqladmin version  
mysqladmin \ # no address option for local connect with root
    -h $(hostname)|&lt;host_ip&gt; [--port=3306] \ # TCP/IP with user@hostname
    --protocol=SOCKET --socket=/var/run/mysqld/mysqld.sock \ # UNIX SOCKET
    -u mysqluser \
    -p \ # specify user and password
    version 
</code></pre>
<blockquote>
<p><code>--protocol=tcp,socket,pipe,memory</code></p>
</blockquote>
<h3 id="账户管理"><a class="header" href="#账户管理">账户管理</a></h3>
<h5 id="创建删除角色"><a class="header" href="#创建删除角色">创建删除角色</a></h5>
<pre><code class="language-sql">CREATE ROLE [IF NOT EXISTS] role [, role ...] 
DROP ROLE [IF EXISTs] role
</code></pre>
<p>给定<code>IF NOT EXISTS</code>或<code>IF EXISTS</code>，则在不满足条件时产生警告而非错误。</p>
<p>示例：</p>
<pre><code class="language-sql">CREATE ROLE 'administrator', 'developer';
CREATE ROLE 'webapp'@'localhost';
</code></pre>
<h5 id="创建用户"><a class="header" href="#创建用户">创建用户</a></h5>
<pre><code class="language-mysql">CREATE [OR REPLACE] USER [IF NOT EXISTS] user_name 
    [IDENTIFIED BY {'password' | PASSWORD 'password_hash'}] # 使用默认认证方法
   |[IDENTIFIED WITH auth_plugin ]                          # 显式指定认证方法（后续再设置密码）
   |[IDENTIFIED WITH auth_plugin BY PASSWORD('password')]   # mariadb使用USING-&gt;BY
   DEFAULT ROLE role;  # Only MySQL
RENAME USER old_user TO new_user;
SET DEFAULT ROLE
    {NONE | ALL | role [, role ...]}
    TO user[, user ...]
SET ROLE { 
	DEFAULT | NONE | ALL [except role[,...]] | role[, role ...]}

</code></pre>
<p><code>username</code>用户名和域名组成<code>'&lt;username&gt;'@'domain'</code>（默认省略域名，等效于以<code>%</code>表示）中如果有特殊字符（例如<code>-</code>）则需要使用引号，密码必须置于引号中。</p>
<blockquote>
<p>MySQL/Mariadb 5.x不支持同时设置密码和验证方法，可先创建用户并设定验证方法，<a href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81">随后设置密码</a>。</p>
</blockquote>
<p><code>SET ROLE</code>设置当前用户当前会话的有效角色。</p>
<p>查看用户信息：</p>
<pre><code class="language-mysql">SELECT Host, User FROM mysql.user;
</code></pre>
<h4 id="删除用户"><a class="header" href="#删除用户">删除用户</a></h4>
<pre><code class="language-mysql">DROP USER 'bloguser'@'localhost';
</code></pre>
<h4 id="修改密码"><a class="header" href="#修改密码">修改密码</a></h4>
<pre><code class="language-sh">ALTER USER '&lt;username&gt;'@'domain' IDENTIFIED 
      [WITH mysql_native_password] 
      BY '&lt;password&gt;';
SET PASSWORD FOR &lt;user&gt; = PASSWORD('pass_word')  # 设置密码Hash值
</code></pre>
<h4 id="权限管理"><a class="header" href="#权限管理">权限管理</a></h4>
<h5 id="授权给用户或角色"><a class="header" href="#授权给用户或角色">授权给用户或角色</a></h5>
<pre><code class="language-sql">GRANT priv_type ON priv_level TO user_or_role;
priv_level: { *  | *.*  | db_name.*
  | db_name.tbl_name  | tbl_name  | db_name.routine_name };
GRANT role TO user_or_role;
</code></pre>
<p><code>priv_type</code>表示对数据库的各类操作类型。</p>
<p>示例：</p>
<pre><code class="language-sh">GRANT ALL [PRIVILEGES] ON *.* TO  'garywang';
GRANT ALL ON db1.* TO jeffrey@localhost;
GRANT SELECT, INSERT ON world.* TO 'role3';
GRANT 'role1', 'role2' TO user1, user2;
</code></pre>
<p>授权的对象必须存在，否则出错。</p>
<blockquote>
<p><em>ERROR 1410 (42000): You are not allowed to create a user with GRANT.</em></p>
</blockquote>
<pre><code class="language-sql">SHOW GRANTS FOR 'bloguser'@'localhost';
</code></pre>
<h5 id="撤销权限"><a class="header" href="#撤销权限">撤销权限</a></h5>
<pre><code class="language-sql">REVOKE ALL PRIVILEGES, GRANT OPTION FROM '&lt;username&gt;';
REVOKE INSERT ON *.* FROM jeffrey@localhost;  # revoke insert privilage
REVOKE 'role1', 'role2' FROM user1, user2;
REVOKE SELECT ON world.* FROM role3;
mysql&gt; FLUSH PRIVILEGES;
</code></pre>
<p>https://dev.mysql.com/doc/refman/8.0/en/grant.html</p>
<p>退出客户端：</p>
<pre><code class="language-sh">exit;
</code></pre>
<h3 id="sql脚本"><a class="header" href="#sql脚本">SQL脚本</a></h3>
<p>在MySQL命令行执行SQL脚本：</p>
<pre><code class="language-mysql">source path/to/mysql.sql
</code></pre>
<p>在终端执行MySQL命令或SQLSQL脚本：</p>
<pre><code class="language-shell">mysql -u USER -p -e &quot;sql_command&quot;
mysql -u USER -p DATABASE &lt; msyql.sql
</code></pre>
<h2 id="sql命令"><a class="header" href="#sql命令">SQL命令</a></h2>
<ul>
<li>每条命令以“<code>;</code>”或“<code>\g</code>”结束；</li>
<li>命令的关键字和标识符默认不区分大小写；</li>
</ul>
<blockquote>
<ul>
<li>命令行输入可以使用“tab键”自动补全；</li>
<li>通过上下键可以查询输入历史；</li>
<li>SQL 语法表述中“<code>[]</code>”中包含的内容是可选的，如果没有指明，则表示使用默认的命令；</li>
</ul>
</blockquote>
<p>在交互式命令行通过<code>help</code>命令，查看SQL命令文档。</p>
<pre><code class="language-mysql">help CREATE TABLE;
help SELECT;
</code></pre>
<h3 id="数据库管理"><a class="header" href="#数据库管理">数据库管理</a></h3>
<pre><code class="language-mysql">SHOW DATABASES;
USE database_name;
SHOW TABLES;        -- 查看数据库的表
DESC table_name;    -- =&gt; describe 显示表的字段定义
SHOW COLLATION;     -- 显示内置的比较规则
</code></pre>
<p>使用<code>SHOW CREATE TABLE</code>查看创建分区的语句；</p>
<h5 id="查看对象的定义"><a class="header" href="#查看对象的定义">查看对象的定义</a></h5>
<p>通过输出的语句，可重新创建相同定义的对象。</p>
<pre><code class="language-mysql">SHOW CREATE DATABASE  db_name \G;  # 显示数据库定义
SHOW CREATE TABLE     tb_name \G;  # 显示表的定义
SHOW CREATE PROCEDURE sp_name \G;  # 显示过程定义
SHOW CREATE FUNCTION  sp_name \G;
</code></pre>
<h3 id="分区"><a class="header" href="#分区">分区</a></h3>
<p><em><strong>every unique key on the table must use every column in the table's partitioning expression</strong></em>.</p>
<p>当声明unique key（primary key）时，其组成部分必须包含分区的列。</p>
<pre><code class="language-sql">UNIQUE KEY (col1, col2)  -- col2 used for partitioning
</code></pre>
<h4 id="range-partition"><a class="header" href="#range-partition">Range Partition</a></h4>
<pre><code class="language-mysql">CREATE TABLE table_name (column_name type contraints,...)
  PARTITION BY RANGE (column_name_x) (
     PARTITION part_name_a VALUES LESS THAN (n0),    # () 是必要的
     ...
     PARTITION part_name_x VALUES LESS THAN MAXVALUE # 不需要括号
  )
</code></pre>
<p>可以在创建表后（即使已经添加数据）再修改表的定义添加分区定义：</p>
<pre><code class="language-mysql">ALTER TABLE table_name PARTITION BY RANGE (column_name_x) (...)
</code></pre>
<p>也可以为表格添加一个或多个新的分区：</p>
<pre><code class="language-mysql">ALTER TABLE table_name ADD PARTITION (...)
</code></pre>
<p>划分已有分区（不会丢失数据）：</p>
<pre><code class="language-mysql">ALTER TABLE table_name REORGANIZE PARTITION exist_part INTO (
    PARTITION s0 VALUES LESS THAN (n00),
    PARTITION s1 VALUES LESS THAN (n01)
);
</code></pre>
<p>调整分区定义（只能调整连续分区）：</p>
<pre><code class="language-mysql">ALTER TABLE table_name REORGANIZE PARTITION p0,p1,... INTO (
    PARTITION p0 VALUES LESS THAN (n01)
);
ALTER TABLE tbl_name REORGANIZE PARTITION partition_list
    INTO (partition_definitions);
</code></pre>
<h5 id="list-partition"><a class="header" href="#list-partition">List Partition</a></h5>
<h5 id="hash-partition"><a class="header" href="#hash-partition">Hash Partition</a></h5>
<h5 id="key-partition"><a class="header" href="#key-partition">Key Partition</a></h5>
<h4 id="分区信息"><a class="header" href="#分区信息">分区信息</a></h4>
<pre><code class="language-mysql">SELECT TABLE_SCHEMA,TABLE_NAME,PARTITION_NAME,
       PARTITION_ORDINAL_POSITION as part_idx,
       PARTITION_METHOD as method,
       PARTITION_EXPRESSION as part_expr,
       PARTITION_DESCRIPTION as part_desc,
       TABLE_ROWS as num_rows,
       CREATE_TIME 
   FROM INFORMATION_SCHEMA.PARTITIONS WHERE TABLE_NAME = 'table_name';
</code></pre>
<h4 id="分区筛选"><a class="header" href="#分区筛选">分区筛选</a></h4>
<p>支持分区筛选的命令包括：<code>SELECT</code>、<code>DELETE</code>、<code>INSERT</code>、<code>REPLACE</code>、<code>UPDATE</code>、<code>LOAD DATA</code>、<code>LOAD XML</code>。</p>
<pre><code class="language-mysql">SELECT * FROM table_name partition (p1,p2,...) WHERE ...
</code></pre>
<h3 id="变量"><a class="header" href="#变量">变量</a></h3>
<h4 id="用户变量"><a class="header" href="#用户变量">用户变量</a></h4>
<pre><code class="language-mysql">set @var_name = EXPRESSION,...;   -- =&gt; SELECT @test;
</code></pre>
<blockquote>
<p>一条语句可设置多个变量。</p>
</blockquote>
<h4 id="参数和局部变量"><a class="header" href="#参数和局部变量">参数和局部变量</a></h4>
<pre><code class="language-mysql">CREATE PROCEDURE p(increment INT)
BEGIN
  DECLARE counter INT DEFAULT 0;
  WHILE counter &lt; 10 DO
    -- ... do work ...
    SET counter = counter + increment;
  END WHILE;
END//
</code></pre>
<h4 id="系统变量"><a class="header" href="#系统变量">系统变量</a></h4>
<p>系统变量影响数据库行为，其中，全局变量影响当前会话以及其后建立的会话，会话变量仅影响当前会话。要设置永久性的系统变量，应该在选项文件中配置。</p>
<h5 id="全局系统变量"><a class="header" href="#全局系统变量">全局系统变量</a></h5>
<pre><code class="language-mysql">SET GLOBAL max_connections = 1000;  -- =&gt; SET @@GLOBAL.max_connections = 1000;
</code></pre>
<blockquote>
<p>要设置的系统变量必须是系统已经定义的，不能通过<code>SET</code>创建全局变量。</p>
</blockquote>
<h5 id="会话系统变量"><a class="header" href="#会话系统变量">会话系统变量</a></h5>
<pre><code class="language-mysql">SET SESSION sql_mode = 'TRADITIONAL'; 
-- =&gt; SET @@SESSION.sql_mode = 'TRADITIONAL';
SET LOCAL sql_mode = 'TRADITIONAL';   
-- =&gt; SET @@LOCAL.sql_mode = 'TRADITIONAL';
SET sql_mode = 'TRADITIONAL';         
-- =&gt; SET @@sql_mode = 'TRADITIONAL';
SET max_join_size = DEFAULT;          
-- =&gt; SET max_join_size = @@GLOBAL.max_join_size;
</code></pre>
<h5 id="显示系统变量"><a class="header" href="#显示系统变量">显示系统变量</a></h5>
<pre><code class="language-mysql">SELECT @@GLOBAL.sql_mode;           -- =&gt; 'TRADITIONAL';
SELECT @@sql_mode                   -- 局部变量
SHOW VARIABLES                      -- 显示所有系统变量的名称和值
</code></pre>
<h3 id="过程"><a class="header" href="#过程">过程</a></h3>
<p><a href="#%E6%9F%A5%E7%9C%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%9A%E4%B9%89">创建过程的语法</a>如下：</p>
<pre><code class="language-mysql">-- CREATE ROUTINE privilege of DEFINER
delimiter //  --*
CREATE [DEFINER = user] PROCEDURE [IF NOT EXISTS] 
routine_name ([proc_parameter[,...]]) 
[characteristic ...] 
    routine_body
CREATE [DEFINER = user] FUNCTION [IF NOT EXISTS] 
routine_body_name ([func_parameter[,...]]) RETURNS type 
[characteristic ...] 
    routine_body
delimiter ;  --*
</code></pre>
<p>过程默认保存在当前使用的数据库，可显式指定关联数据库<code>db_name.routine_name</code>。</p>
<p><code>routine_body</code>过程内容：可以为单条SQL语句，或由<code>BEGIN...END</code>语句块包含多条SQL语句。</p>
<blockquote>
<p><code>*</code>：过程中==包含多条SQL语句==时，过程本身的结束标识和过程内容<code>routine_body</code>中的语句结束标识不能一致，因此修改当前环境的结束标识为<code>//</code>。</p>
</blockquote>
<p><code>PROCEDURE</code>参数列表：<code>[IN|OUT|INOUT] param_name type</code>，默认为<code>IN</code>（输入参数），<code>OUT</code>（输出参数，初始值为<code>NULL</code>）可将值返回给调用者。</p>
<p><code>FUNCTION</code>参数列表：<code>param_name type</code>，函数形式通过<code>RETURN</code>语句返回结果，<code>RETURNS</code>语句声明返回结果的类型。</p>
<h5 id="调用过程"><a class="header" href="#调用过程">调用过程</a></h5>
<pre><code class="language-mysql">call db_name.routine_name(proc_parameter,...)
</code></pre>
<h2 id="数据导入导出"><a class="header" href="#数据导入导出">数据导入导出</a></h2>
<h3 id="sql脚本-1"><a class="header" href="#sql脚本-1">SQL脚本</a></h3>
<blockquote>
<p>MySQL中如果表和表之间建立的外键约束，则无法删除表及修改表结构。解决方法是在Mysql中取消外键约束: <code>SET FOREIGN_KEY_CHECKS=0</code>；然后将原来表的数据导出到sql语句，重新创建此表后，再把数据使用sql导入，然后再设置外键约束: <code>SET FOREIGN_KEY_CHECKS=1</code>;</p>
</blockquote>
<h4 id="命令行导入导出工具"><a class="header" href="#命令行导入导出工具">命令行导入导出工具</a></h4>
<p><code>mysqldump</code>生成SQL语句以重新申城原数据库对象的定义以及数据表的数据，用于备份数据库或传输到其他SQL服务器，<code>mysqldump</code>命令还可以输出CSV、其他分隔符文件或XML文件。</p>
<pre><code class="language-shell">mysqldump -u root -p DATABASE_NAME [TABLE_NAME...] \
    --result-file=database_name.db   # 导出一个库的某些表
    --databases db_name ...          # 导出指定的库
    --all-databases                  # 导出所有库
    -d, --no-data                    # 不导出数据仅导出定义
mysqldump [options] --tab=dirname \  # 仅用于服务器所在机器，因为服务器要在指定目录创建文件
    --fields-terminated-by=... --fields-enclosed-by=... --fields-escaped-by=... \
    --lines-terminated-by=...  # mysqldump独立生成数据表创建文件和MYSQL服务导出数据文件
</code></pre>
<blockquote>
<p><code>mysqldump</code>使用和<code>mysql</code>相同参数连接数据库服务。</p>
</blockquote>
<p><code>mysqldump</code>可以方便查看和编辑导出的数据，适用于测试开发目的；但并不是一种快速或可扩展的备份大量数据的方法，因为恢复数据时执行SQL语句将产生大量插入、创建索引等磁盘I/O，导致恢复过程及其缓慢。对于大数据备份和恢复，可直接复制数据库文件目录。</p>
<h5 id="问题"><a class="header" href="#问题">问题</a></h5>
<ol>
<li>
<p><em>'Access denied; you need (at least one of) the PROCESS privilege(s) for this operation' when trying to dump tablespaces</em>：<a href="https://dba.stackexchange.com/questions/271981/access-denied-you-need-at-least-one-of-the-process-privileges-for-this-ope">指定<code>--no-tablespaces</code>选项</a>。</p>
</li>
<li>
<p><em>error: 1227: Access denied; you need (at least one of) the FILE privilege(s) for this operation when executing 'SELECT INTO OUTFILE'</em>：<a href="#https://stackoverflow.com/a/39963216/6571140">指定全局文件权限</a><code>GRANT FILE ON *.* TO user;</code></p>
</li>
<li>
<p><em>error: 1290: The MySQL server is running with the --secure-file-priv option so it cannot execute this statement when executing 'SELECT INTO OUTFILE'</em>：当指定<code>--tab</code>选项时，<a href="https://stackoverflow.com/questions/32737478/how-should-i-tackle-secure-file-priv-in-mysql">仅能从<code>secure-file-priv</code>指定的目录读写数据</a>或在配置文件中将指定路径清空。</p>
<blockquote>
<pre><code class="language-mysql">SHOW VARIABLES LIKE &quot;secure_file_priv&quot;
</code></pre>
<pre><code class="language-ini">[mysqld]
secure-file-priv = &quot;&quot;
</code></pre>
</blockquote>
</li>
</ol>
<pre><code class="language-shell">mysql -u USER -p DB_NAME &lt; database_name.db
mysql db_name &lt; backup-file.sql
mysql -e &quot;source /path-to-backup/backup-file.sql&quot; db_name
</code></pre>
<p>导入文本数据（CSV）</p>
<pre><code class="language-shell">mysqlimport [options] db_name textfile1 [textfile2 ...]
</code></pre>
<pre><code class="language-mysql">LOAD DATA [LOCAL] INFILE 'path/to/file.csv' INTO TABLE table_name
     FIELDS TERMINATED BY ',' 
     ENCLOSED BY '&quot;'
     LINES TERMINATED BY '\n' 
     IGNORE 1 ROWS;  -- 忽略表头
</code></pre>
<p>如果使用<code>--tab</code>导出的数据，可分别导入<code>.sql</code>文件和文本文件。</p>
<h4 id="mysql命令行导入导出工具"><a class="header" href="#mysql命令行导入导出工具"><em>MySQL命令行导入导出工具</em></a></h4>
<h2 id="mysql连接器"><a class="header" href="#mysql连接器">MySQL连接器</a></h2>
<h5 id="java"><a class="header" href="#java">Java</a></h5>
<p>使用包管理器（<code>rpm</code>或<code>deb</code>）安装连接器的库还需要顺带安装依赖包。</p>
<pre><code class="language-shell">========================================================================
 Package                       Arch     Version                    Size
========================================================================
Installing:
 mysql-connector-java          noarch   1:8.0.26-1.el7            2.7 M
Installing for dependencies:
 avahi-libs                    x86_64   0.6.31-20.el7              62 k
 copy-jdk-configs              noarch   3.3-10.el7_5               21 k
 cups-libs                     x86_64   1:1.6.3-51.el7            359 k
 java-1.8.0-openjdk-headless   x86_64   1:1.8.0.302.b08-0.el7_9    33 M
 javapackages-tools            noarch   3.4.1-11.el7               73 k
 libjpeg-turbo                 x86_64   1.2.90-8.el7              135 k
 libxslt                       x86_64   1.1.28-6.el7              242 k
 lksctp-tools                  x86_64   1.0.17-2.el7               88 k
 pcsc-lite-libs                x86_64   1.8.8-8.el7                34 k
 python-javapackages           noarch   3.4.1-11.el7               31 k
 python-lxml                   x86_64   3.2.1-4.el7               758 k
 tzdata-java                   noarch   2021a-1.el7               191 k
</code></pre>
<p>如果只需要连接器的库，可下载平台无关的档案文件。</p>
<h2 id="常见问题"><a class="header" href="#常见问题">常见问题</a></h2>
<ol>
<li><em><code>ERROR 1071 (42000): Specified key was too long; max key length is 767 bytes</code></em>：将键对应的列的数据类型长度减小。<a href="https://cloud.tencent.com/developer/article/1005696">MySQL 经典案例分析：Specified key was too long - 云+社区 - 腾讯云 (tencent.com)</a>。</li>
<li></li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../数据库/SQL数据类型.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../数据库/PostgreSQL.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../数据库/SQL数据类型.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../数据库/PostgreSQL.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../theme/pagetoc.js"></script>
        <script type="text/javascript" src="../theme/MathJax.js"></script>
    </body>
</html>